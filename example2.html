<html>
  <body>
  <script src="three.js"></script>
  <script>
    let container, camera, scene, renderer, cubeMesh;
    window.layers = [];

    function init() {
      container = document.createElement('div');
      document.body.appendChild(container);

      camera = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 0.1, 1000);

      scene = new THREE.Scene();
      // scene.background = new THREE.Color(0x3B3961);

      const ambientLight = new THREE.AmbientLight(0x808080);
      scene.add(ambientLight);

      const directionalLight = new THREE.DirectionalLight(0xFFFFFF, 4);
      directionalLight.position.set(1, 1, 1);
      scene.add(directionalLight);

      cubeMesh = (() => {
        const geometry = new THREE.BoxBufferGeometry(0.1, 0.1, 0.1);
        const material = new THREE.MeshPhongMaterial({
          color: 0x00FF000,
        });
        const mesh = new THREE.Mesh(geometry, material);
        mesh.position.z = -1;
        mesh.position.x = 0.1/4;
        mesh.position.y = 0.1/4;
        mesh.rotation.order = 'YXZ';
        mesh.frustumCulled = false;
        return mesh;
      })();
      scene.add(cubeMesh);

      renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      container.appendChild(renderer.domElement);

      /* renderer = {
        domElement: document.createElement('canvas'),
      };
      const ctx = renderer.domElement.getContext('webgl'); */

      window.layers.push(renderer.domElement);
    }

    function animate() {
      /* renderer.state.reset();
      camera.fov = fov;
      camera.aspect = window.innerWidth / window.innerHeight; */
      cubeMesh.rotation.x += 0.02;
      cubeMesh.rotation.y += 0.02;
      renderer.render(scene, camera);
      camera.updateProjectionMatrix();
      requestAnimationFrame(animate);
    }

    init();
    animate();
  </script>
  </body>
</html>
